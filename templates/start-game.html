{% extends 'index.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
    <main>
        <div class="container min-width-355">
            <nav class="navbar bg-body-tertiary ">
                <div class="container-fluid">
                    <a class="navbar-brand" href="/"><h3>–ú–æ—Ä—Å–∫–æ–π –±–æ–π</h3></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-3 mb-lg-0">
                            <li class="nav-item mb-3">
                                <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</button>
                                <!-- Modal -->
                                <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                                     aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="staticBackdropLabel">–ü—Ä–∞–≤–∏–ª–∞</h1>
                                            </div>
                                            <div class="modal-body">
                                                {{ alert }}
                                                –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–≤–µ—Å—Ç–∏ –¥–≤—É—Ö–∑–Ω–∞—á–Ω–æ–µ —á–∏—Å–ª–æ.<br>
                                                –ü–µ—Ä–≤–∞—è —Ü–∏—Ñ—Ä–∞ —ç—Ç–æ –æ—Å—å X –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –æ—Ç 0 –¥–æ 9 (–æ—Ç—Å—á–µ—Ç –∫–ª–µ—Ç–æ–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 0 !!)<br>
                                                –í—Ç–æ—Ä–∞—è —Ü–∏—Ñ—Ä–∞ —ç—Ç–æ –æ—Å—å Y –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –æ—Ç 0 –¥–æ 9 (–æ—Ç—Å—á–µ—Ç –∫–ª–µ—Ç–æ–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 0 !!)<br>
                                                –ï—Å–ª–∏ –≤ –ø–æ–ª–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤–≤–µ—Å—Ç–∏ <b>stop</b> –∏–≥—Ä–∞ –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.<br>
                                                –ü—Ä–∏–º–µ—Ä : 25<br>
                                                –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—è —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ:
                                                <br>
                                                <img class="img-fluid" alt="" src="{{ url_for('static', filename='images/pole.png') }}">
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">–ü–æ–Ω—è—Ç–Ω–æ -
                                                    –∑–∞–∫—Ä—ã—Ç—å
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- END Modal -->
                            </li>
                            <li class="nav-item mb-3">
                                <form action="{{ url_for('restart_game') }}" method="post">
                                    <button type="submit" class="btn btn-outline-secondary">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É</button>
                                </form>
                            </li>
                            <li class="nav-item mb-3">
                                <!-- Button trigger modal -->
                                <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal">–ü–æ–¥—Å–º–æ—Ç—Ä–µ—Ç—å üëÅÔ∏è</button>
                                <!-- Modal -->
                                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="exampleModalLabel">–ö–æ—Ä–∞–±–ª–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <!-- –ø–æ–ª–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ —Å –≤–∏–¥–∏–º—ã–º–∏ –∫–æ—Ä–∞–±–ª—è–º–∏ -->
                                                <div class="text-center font-monospace">
                                                    {% for item in comp_pole %}
                                                        {% for a in item %}
                                                            {{ a }}
                                                        {% endfor %}<br>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <br>

            <div class="row row-cols-1 row-cols-md-1 ">
                <div class="col my-1">
                    <div class="card h-100">
                        <div class="card-header" data-bs-toggle="collapse" data-bs-target="#collapseCard1">
                            <div class="row">
                                <div class="col"><h5 class="card-title text-center">–í–∞—à–µ –ø–æ–ª–µ</h5></div>
                            </div>
                        </div>
                        <div id="collapseCard1" class="collapse">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col border d-flex justify-content-center">
                                        <table>
                                            <tr>
                                                <td>&nbsp;</td>
                                                <td>
                                                    <div class="text text-danger font-monospace">0 1 2 3 4 5 6 7 8 9</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="text text-danger font-monospace">
                                                    0&nbsp;<br>
                                                    1&nbsp;<br>
                                                    2&nbsp;<br>
                                                    3&nbsp;<br>
                                                    4&nbsp;<br>
                                                    5&nbsp;<br>
                                                    6&nbsp;<br>
                                                    7&nbsp;<br>
                                                    8&nbsp;<br>
                                                    9&nbsp;<br>
                                                </td>
                                                <td class="font-monospace">
                                                    {% for item in player_pole %}
                                                        {% for a in item %}
                                                            {{ a }}
                                                        {% endfor %}<br>
                                                    {% endfor %}
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer"></div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <div class="card-header">
                            <div class="row">
                                <div class="col"><h5 class="card-title text-center">–ö–æ–º–ø –ø–æ–ª–µ</h5></div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col border d-flex justify-content-center">
                                    <table>
                                        <tr>
                                            <td>&nbsp;</td>
                                            <td>
                                                <div class="text text-danger font-monospace">0 1 2 3 4 5 6 7 8 9</div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text text-danger font-monospace">
                                                0&nbsp;<br>
                                                1&nbsp;<br>
                                                2&nbsp;<br>
                                                3&nbsp;<br>
                                                4&nbsp;<br>
                                                5&nbsp;<br>
                                                6&nbsp;<br>
                                                7&nbsp;<br>
                                                8&nbsp;<br>
                                                9&nbsp;<br>
                                            </td>
                                            <td class="font-monospace">
                                                {% for item in comp_pole_hide_ship %}
                                                    {% for a in item %}
                                                        {{ a }}
                                                    {% endfor %}<br>
                                                {% endfor %}
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer"></div>
                    </div>
                </div>
            </div>

            <br>

            <!-- –±–ª–æ–∫ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π -->
            <div class="container">
                <div class="row-">
                    <div class="col-xs-6 md-3">
                        {% if win == "player" or win == "comp" %} <!--–µ—Å–ª–∏ –∫—Ç–æ —Ç–æ –≤—ã–∏–≥—Ä–∞–ª -->
                            <div class="alert alert-secondary" role="alert">
                                {% for msg in get_flashed_messages() %}
                                    <div class="alert alert-secondary" role="alert">
                                        {{ msg | safe }}
                                    </div>
                                {% endfor %}
                            </div>
                        {% elif move_player == 1 %} <!--–µ—Å–ª–∏ —Ö–æ–¥ –∏–≥—Ä–æ–∫–∞ -->
                            {% if crd != 'stop' %} <!--–µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤–≤–µ–ª stop –æ—Å—Ç–∞–Ω–æ–≤–∏–ª –∏–≥—Ä—É -->
                                {% if get_flashed_messages() %}
                                    <div class="alert alert-secondary" role="alert">
                                        {% for msg in get_flashed_messages() %}
                                            {{ msg | safe }}<br>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                                <form action="/start" method="post">
                                    <div class="col-md-6 mx-auto">

                                        <input type="text" maxlength="4" name="coord_input" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã">

                                        <div class="d-flex justify-content-center">
                                            <button type="submit" class="btn btn-secondary mt-3">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                                        </div>
                                    </div>
                                </form>
                            {% else %}
                                {% for msg in get_flashed_messages() %}
                                    {{ msg | safe }}<br>
                                {% endfor %}
                            {% endif %}
                        {% elif move_comp == 1 %} <!--–µ—Å–ª–∏ —Ö–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ -->
                            <div class="alert alert-secondary" role="alert">
                                {% for msg in get_flashed_messages() %}
                                    {{ msg | safe }}<br>
                                {% endfor %}
                            </div>
                        {% endif %}

                    </div>
                </div>
            </div>
            <footer class="pt-3 mt-4 text-body-secondary border-top">&copy; 2023</footer>
        </div>
    </main>

    {% if move_comp == 1 %}
        <script>
            setTimeout(function () {
                location.reload();
            }, 1500);
        </script>
    {% endif %}
{% endblock %}
